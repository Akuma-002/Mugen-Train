flowchart LR
  Browser["Browser / Frontend (React)"]
  UB["User Backend (Node/Express)"]
  AB["Admin Backend (Node/Express)"]
  PY["Python Microservice (FastAPI)"]
  DB["MongoDB"]
  CACHE["Redis (cache)"]
  PAY["Payment Gateway"]
  NOT["Notification Service (Email/SMS)"]

  Browser -->|Search / Booking Requests| UB
  Browser -->|Admin actions (protected)| AB
  Browser -->|Search| PY

  UB -->|Seat allocation / PNR request| PY
  PY -->|Train data read| DB
  AB -->|Manage trains| DB
  UB -->|Persist booking| DB
  PY -->|Cache results / intermediate data| CACHE
  UB -->|Cache lookups| CACHE

  UB -->|Payment| PAY
  UB -->|Send notification| NOT

  classDef service fill:#f9f,stroke:#333,stroke-width:1px;
  class Browser,UB,AB,PY,DB,CACHE,PAY,NOT service
